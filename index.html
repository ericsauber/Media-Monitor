<!DOCTYPE HTML>

<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
    <link rel="stylesheet" href="stylesheet.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>Media Monitor</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>


    <!-- UGLY CSS STUFF DON'T PAY ATTENTION TO THIS -->
    <style>
        #middle {
            width: 80%;
            margin: auto;
            opacity: 0.5;
            text-align: center;
        }
        
        #middle2 {
            width:90%;
            margin:auto;
            opacity: 0.5;
            text-align:center;
        }
        
        #leftCol {
            float: left;
            padding: 15px;
            opacity: 0.5;
            width: 50%;
            font-size: 18px;
            background-color: azure;
        }
        
        #rightCol {
            float: left;
            padding: 15px;
            opacity: 0.5;
            width: 50%;
            font-size: 18px;
            background-color: white;
        }
        
        #rating {
            clear: both;
            margin: auto;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            background-color: #BFD6DA;
            width: 80%;
            visibility: hidden;
        }

        #sim1 {
            float: left;
            padding:15px;
            opacity: 0.5;
            width:50%;
            font-size:18px;
            background-color: white;
        }
        
        #sim2 {
            float: left;
            padding:15px;
            opacity: 0.5;
            width:50%;
            font-size:18px;
            background-color: white;
        }
        
        #urls {
            clear: both;
            margin: auto;
            padding-top: 10px;
            background-color: #6F99A1;
            height: 120px;
        }
        
        body {
            background-color: #7ED4EE;
        }
        
        input {
            background-color: #BBEFFF;
            margin: 4px;
        }
        
        .form-style-6 {
            font: 95% Arial, Helvetica, sans-serif;
            max-width: 400px;
            margin: 10px auto;
            padding: 16px;
            background: #F7F7F7;
        }
        
        .form-style-6 input[type="text"],
        .form-style-6 input[type="date"],
        .form-style-6 input[type="datetime"],
        .form-style-6 input[type="email"],
        .form-style-6 input[type="number"],
        .form-style-6 input[type="search"],
        .form-style-6 input[type="time"],
        .form-style-6 input[type="url"],
        .form-style-6 textarea,
        .form-style-6 select {
            -webkit-transition: all 0.30s ease-in-out;
            -moz-transition: all 0.30s ease-in-out;
            -ms-transition: all 0.30s ease-in-out;
            -o-transition: all 0.30s ease-in-out;
            outline: none;
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            width: 50%;
            background: #fff;
            margin-bottom: 4%;
            border: 1px solid #ccc;
            padding: 3%;
            color: #555;
            font: 95% Arial, Helvetica, sans-serif;
        }
        
        .form-style-6 input[type="text"]:focus,
        .form-style-6 input[type="date"]:focus,
        .form-style-6 input[type="datetime"]:focus,
        .form-style-6 input[type="email"]:focus,
        .form-style-6 input[type="number"]:focus,
        .form-style-6 input[type="search"]:focus,
        .form-style-6 input[type="time"]:focus,
        .form-style-6 input[type="url"]:focus,
        .form-style-6 textarea:focus,
        .form-style-6 select:focus {
            box-shadow: 0 0 5px #43D1AF;
            padding: 3%;
            border: 1px solid #43D1AF;
        }
        
        .form-style-6 input[type="submit"],
        .form-style-6 input[type="button"] {
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            width: 70%;
            padding: 3%;
            background: #43D1AF;
            border-bottom: 2px solid #30C29E;
            border-top-style: none;
            border-right-style: none;
            border-left-style: none;
            color: #fff;
        }
        
        .form-style-6 input[type="submit"]:hover,
        .form-style-6 input[type="button"]:hover {
            background: #2EBC99;
        }

    </style>

    <!-- END OF CSS -->


    <div id="logo" style="text-align:center"><img src="logo.png" /></div>

    <div id="middle">
        <div id="leftCol"><em>top ten words for URL1</em></div>
        <div id="rightCol"><em>top ten words for URL2</em></div>
    </div>
    <div id="rating"><em>rating will go here once we calculate it</em></div>

    </div>
    <div id="middle2">
        
        <div id="sim1"><div id="simHead1"></div>
                       <em><a target="_blank" id="sim1linka" href="#">similar articles for URL1</a></em>
                       <em><a target="_blank" id="sim1linkb" href="#"></a></em>
                       <em><a target="_blank" id="sim1linkc" href="#"></a></em></div>
        

        <div id="sim2"><div id="simHead2"></div>
                       <em><a target="_blank" id="sim2linka" href="#">similar articles for URL2</a></em>
                       <em><a target="_blank" id="sim2linkb" href="#"></a></em>
                       <em><a target="_blank" id="sim2linkc" href="#"></a></em></div>
</div>



    <div class="form-style-6" id="urls">
        <form style="text-align:center" id="send-message">
            <input size="35" style="padding-left: 3px" placeholder="URL 1" id="message"></input><br>
            <input size="35" style="padding-left: 3px" placeholder="URL 2" id="message2"></input><br>
            <input type="submit" value="Analyze"></input>
        </form>
    </div>



    <!-- JAVASCRIPT PART -->

    <script>
        // this allows us to change html/css things with javascript
        var leftText = document.querySelector("#leftCol");
        var middleBox = document.querySelector("#middle");
        var allBox = document.querySelector("#all");
        var rightText = document.querySelector("#rightCol");
        var rightText = document.querySelector("#rightCol");
        var ratingBox = document.querySelector("#rating");
        var leftSimArt1 = document.querySelector("#sim1");
        var rightSimArt2 = document.querySelector("#sim2");
        var urlBox = document.querySelector("#urls");
        var topTen = [];
        var topTen2 = [];
        var simArts1 = [];
        var simArts2 = [];

        $("#logo").hide(0).fadeIn(250);
        $("#middle").hide(0).fadeIn(450);
        $("#urls").hide(0).fadeIn(1000);

        jQuery(function($) {
            var socket = io.connect();
            var $messageForm = $('#send-message');
            var $messageBox = $('#message');
            var $messageBox2 = $('#message2');
            var $left = $('#leftCol');
            var $right = $('#rightCol'); // haven't used this one yet
            var $rate = $('#rating');
            var $simArt1 = $('#sim1');
            var $simArt2 = $('#sim2');


            $messageForm.submit(function(e) {
                e.preventDefault();
                socket.emit('send message', $messageBox.val());
                socket.emit('send message2', $messageBox2.val());
                $messageBox.val('');
                $messageBox2.val('');
            });

            socket.on('new message', function(data) {

                // unnecesary things to make it look fancy
                $("#leftCol").empty()

                leftText.style.opacity = '1';
                middleBox.style.opacity = '1';
                middleBox.style.textAlign = 'left';
                rating.style.padding = '15px';
                urlBox.style.visibility = 'hidden';


                $("#leftCol").animate({
                    height: '290'
                });

                var max = (data.length > 10 ? 10 : data.length);

                for (var z = 0; z < max; z++) {
                    topTen[z] = data[z];
                    console.log(topTen[z][0]);
                    $left.append(z + 1 + ". " + topTen[z][0] + " " + topTen[z][1] + "<br>");
                }

            });

            socket.on('new message2', function(data) {
                $("#rightCol").empty();

                leftText.style.opacity = '1';
                middleBox.style.opacity = '1';
                middleBox.style.textAlign = 'left';
                rating.style.padding = '15px';
                urlBox.style.visibility = 'hidden';

                var max = (data.length > 10 ? 10 : data.length);

                $("#rightCol").animate({
                    height: '290'
                });

                for (var z = 0; z < max; z++) {
                    topTen2[z] = data[z];
                    console.log(topTen2[z][0]);
                    $right.append(z + 1 + ". " + topTen2[z][0] + " " + topTen[z][1] + "<br>");
                }
            });


            //Displays similar articles for first article
            socket.on('similarArticles1', function(data) {
                
                for (var z = 0; z <= 2; z++) {
                    var substr = JSON.stringify(data[z]);
                    var link = data[z];
                    var link2;
                    var spot = 0;

                    for (var q = 0; link.length; q++) {
                        if (link.charAt(q) == '&') {
                            spot = q;
                            break;
                        }
                    }

                    link2 = link.slice(0,spot);
                    substr = substr.slice(0,23);
                    substr += ' ...';

                    $("#simHead1").text("Similar Articles");
                    $("#simHead1").append("<br");

                        if (z == 0) {
                            $("#sim1linka").text("1. " + substr);
                            $("#sim1linka").append("<br>");
                            $("#sim1linka").attr("href", link2);
                            console.log("1: " + data[z]);
                        }

                        if (z == 1) {
                            $("#sim1linkb").text("2. " + substr);
                            $("#sim1linkb").append("<br>");
                            $("#sim1linkb").attr("href", link2);
                            console.log("2: " + data[z]);
                        }

                        if (z == 2) {
                            $("#sim1linkc").text("3. " + substr);
                            $("#sim1linkc").append("<br>");
                            $("#sim1linkc").attr("href", link2);
                            console.log("3: " + data[z]);
                        }
                }

            });

            //Displays similar articles for second article
            socket.on('similarArticles2', function(data) {
                for (var z = 0; z <= 2; z++) {
                 
                    var substr = JSON.stringify(data[z]);
                    var link = data[z];
                    var link2;
                    var spot = 0;

                    for (var q = 0; link.length; q++) {
                        if (link.charAt(q) == '&') {
                            spot = q;
                            break;         
                        }
                    }

                    link2 = link.slice(0,spot);
                    substr = substr.slice(0,23);
                    substr += ' ...';

                    $("#simHead2").text("Similar Articles");
                    $("#simHead2").append("<br");

                        if (z == 0) {
                            $("#sim2linka").text("1. " + substr);
                            $("#sim2linka").append("<br>");
                            $("#sim2linka").attr("href", link2);
                            console.log("1: " + data[z]);
                            console.log("link: " + link2);
                        }

                        if (z == 1) {
                            $("#sim2linkb").text("2. " + substr);
                            $("#sim2linkb").append("<br>");
                            $("#sim2linkb").attr("href", link2);
                            console.log("2: " + data[z]);
                            console.log("link: " + link2);
                        }

                        if (z == 2) {
                            $("#sim2linkc").text("3. " + substr);
                            $("#sim2linkc").append("<br>");
                            $("#sim2linkc").attr("href", link2);
                            console.log("3: " + data[z]);
                            console.log("link: " + link2);
                        }
                }
            });

            ///This is the code that displays the percentage match at the bottom of the website display
            socket.on('stats', function(data) {

                $("#rating").empty();
                rating.style.visibility = 'visible';
                $("#rating").hide(0).delay(500).fadeIn(200);

                console.log("Percent matching: " + data);
                $rate.append("Percent matching: " + data + "<br>");

            });
        });

    </script>
</body>

</html>
